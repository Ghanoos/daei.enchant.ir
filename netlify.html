<!DOCTYPE html>
<html dir="rtl" lang="fa">
  
  <head><meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="author" content="مهدی صادقی" />
<meta name="copyright" content="Commons Attribution 4.0 International" />
<meta name="robot" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="سکوی انتشار مطالبی در مورد دانش تولید نرم‌افزار و ایده‌ها و علایق شخصی‌ام." />

<link rel="canonical" href="https://mehdix.ir/publishing-with-jekyll.html" />
<link rel="icon" href="https://mehdix.ir/assets/img/me.png" />
<link rel="stylesheet" href="https://mehdix.ir/assets/css/main.css" />
<link rel="stylesheet" href="https://mehdix.ir/assets/fonts/fontawesomev5.0.2.css" />
<meta name="keywords" content='امنیت,https,cdn,ssl' /><title>فعالسازی HTTPS به کمک Netlify - مهدی صادقی</title><!-- Begin Jekyll SEO tag v2.4.0 -->
<title>فعالسازی HTTPS به کمک Netlify | مهدی صادقی</title>
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="فعالسازی HTTPS به کمک Netlify" />
<meta name="author" content="مهدی صادقی" />
<meta property="og:locale" content="fa_IR" />
<meta name="description" content="از امروز این وبسایت علاوه بر HTTP از طریق HTTPS هم در دسترس است. در این مطلب شرح می‌دهم چطور اینکار را انجام دادم." />
<meta property="og:description" content="از امروز این وبسایت علاوه بر HTTP از طریق HTTPS هم در دسترس است. در این مطلب شرح می‌دهم چطور اینکار را انجام دادم." />
<link rel="canonical" href="https://mehdix.ir/netlify.html" />
<meta property="og:url" content="https://mehdix.ir/netlify.html" />
<meta property="og:site_name" content="مهدی صادقی" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-12-16T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@msadeghii" />
<meta name="twitter:creator" content="@مهدی صادقی" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://mehdix.ir/netlify.html"},"url":"https://mehdix.ir/netlify.html","author":{"@type":"Person","name":"مهدی صادقی"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://mehdix.ir/assets/img/me.png"},"name":"مهدی صادقی"},"description":"از امروز این وبسایت علاوه بر HTTP از طریق HTTPS هم در دسترس است. در این مطلب شرح می‌دهم چطور اینکار را انجام دادم.","headline":"فعالسازی HTTPS به کمک Netlify","dateModified":"2017-12-16T00:00:00+01:00","datePublished":"2017-12-16T00:00:00+01:00","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  </head>

  <body><header>
  <div class="wrapper">
    <a class="site-title" href="https://mehdix.ir/">مهدی صادقی</a>
    <small id="motto"> در مورد نرم‌افزار و ایده‌هایم </small>
  </div>
</header>
<main>
      <div class="wrapper">

<article class="post-content">

  <div class="post-header">
    <h1 class="post-title">فعالسازی HTTPS به کمک Netlify</h1>
    <p>
      <i class="fas fa-calendar"></i>
      شنبه ۲۵ آذر ۱۳۹۶<br>
      
      <i class="fas fa-stopwatch"></i>
      ۳ دقیقه مطالعه
    </p>
  </div>

  <p>از امروز این وبسایت علاوه بر HTTP از طریق <a href="https://mehdix.ir">HTTPS</a> هم در دسترس است. در این مطلب شرح می‌دهم چطور اینکار را انجام دادم.</p>

<p>قبل از اینکه شیرجه بزنیم داخل راهنما، یک توضیح کوچک راجع به HTTPS بدهم. هر سایت می‌تواند به صورت HTTP یا HTTPS سرو شود. وقتی اطلاعات با HTTP سرو می‌شود هر کامپیوتری بین کامپیوتر یا موبایل ما و سایت مقصد هم لینک را می‌بیند و هم محتوا را، شامل عکس، رمز، متن و مانند اینها. از اینها گذشته می‌تواند آنرا تغییر بدهد، مثل کاری که چند وقت پیش ایرانسل انجام می‌داد و در صفحاتی که با HTTP سرو می‌شدند تبلیغات نمایش می‌داد. اما اگر وبسایتی با HTTPS سرو بشود محتوا بین کامپیوتر ما و سرور مقصد رمز می‌شود و قابل فهم نیست. امکان تغییر اطلاعات هم نیست چون مرورگر خطا می‌دهد. البته مهم است که از مرورگر سالم و دست‌نخورده استفاده کنیم، چرا که مرورگر لیست گواهینامه‌هایی که می‌تواند به آنها اعتماد کند در دل خودش دارد. تنها چیزی که کامپیوترهای بین راه در این حالت می‌بینند نام دامنه است. آنها حتی رشته‌ای که بعد از نامه دامنه می‌آیند را نخواهند دید. مثلا با مراجعه به <a href="/bookmarker.html">https://mehdix.ir/bookmarker.html</a> سرورهای بین راه فقط https://mehdix.ir را می‌بینند و باقی غیرقابل فهم است. قبلا در مورد <a href="/free-https-for-all.html">گواهینامه</a> نوشته‌ام.</p>

<p>وبسایت من استاتیک است یعنی سروری از خودش ندارد و از Github سرو می‌شود. گیت‌هاب برای دامین‌های شخصی فعالسازی HTTPS را پشتیبانی نمی‌کند. برای اینکه بدون استفاده از سرور مجزا بتوان HTTPS را فعال کرد تنها یک راه وجود دارد، باید از یک CDN استفاده کرد. CDN اختصار Content Delivery Network است. با بکارگیری CDN وبسایت از طریق شبکه بزرگی از سرورهایی که در قاره‌های مختلف پراکنده‌اند سرو می‌شود. معمولا برای سرو کردن عکس‌ها و فایل‌های استاتیک از این تکنیک استفاده می‌شود، هدف اصلی هم کاهش ترافیک سرور اصلی و افزایش سرعت دسترسی به وبسایت است.</p>

<p>از جایی که CDN مثل یک پر‌اکسی عمل می‌کند ما می‌توانیم به کمک آن HTTPS را برای وبسایتمان فعال کنیم. معروفترین CDN‌ای که اینکار را انجام می‌دهد CloudFlare است ولی متاسفانه به دامین‌های <code class="highlighter-rouge">.ir</code> خدمات نمی‌دهد. شرکت دیگری که خدمات مشابه و بسیار برنامه‌نویس‌پسند! ارائه می‌دهد نامش <a href="http://netlify.com/">Netlify</a> است که یک استارت‌اپ تازه‌تاسیس در سانفرانسیسکوست. من با کمک این سرویس HTTPS را برای وبسایتم فعال کردم.</p>

<p>چیزی که باعث حیرت من شد کیفیت بسیار بالا و راحتی بسیار زیاد کار با Netlify بود. از طرفی برای دامین‌های ایران هم محدودیت ندارد. (ولی شاید در آینده با گسترش شرکت به فکر محدود کردن بیفتند) به طور خلاصه خدمات زیر را در پلن رایگانشان ارائه می‌کنند:</p>

<ol>
  <li>بیلد و دیپلوی کردن ریپازیتوری از روی گیت‌هاب</li>
  <li>مدیریت دامنه جداگانه برای هر مخزن نرم‌افزاری (می‌شود یک وبسایت به هر مخزن منسوب کرد.)</li>
  <li>فعالسازی HTTPS از طریق صدور گواهینامه Let’s Encrypt</li>
  <li>افزایش سرعت لود با استفاده از  CDN این شرکت</li>
  <li>بهینه‌سازی و فشرده‌سازی فایلهای وبسایت</li>
  <li>مدیریت فرم‌های HTML و ارسال محتوا از طریق WebHook</li>
  <li>امکان انجام Split Testing روی ترافیک (گروهی از کاربران دیزاین دیگری می‌بینند)</li>
  <li>امکان افزودن مدیریت کاربران به سایتهای استاتیک</li>
</ol>

<p>و البته خیلی امکانات دیگر که در وبسایتشان توضیح داده‌اند.</p>

<p>مراحل فعالسازی هم بسیار ساده بود. من ابتدا یک اکانت ساختم و بعد به شکل اتوماتیک مخزن گیت‌هابی که محتوای سایتم روی آن است را انتخاب کردم. از جایی که خودشان بیلد جکیل را ساپورت می‌کردند نیازی به افزودن فایل کانفیگ مجزا هم نبود. فقط از جایی که بیلد صحیح سایت من به نسخه جدیدتری از روبی نسبت به نسخه دیفالت بیلدسرور آنها نیاز داشت یک فایل <code class="highlighter-rouge">.ruby-version</code> به مخزن اضافه کردم. از سوی دیگر آدرسهای سرور دامنه‌ای که اختصارا برای هر مخزن تولید می‌شود را در وبسایت ایرنیک وارد کردم تا دامنه mehdix.ir توسط Netlify هدایت بشود.</p>

<p>در مجموع خیلی راضی هستم و در پروژه‌های بیشتری از Netlify استفاده خواهم کرد.</p>



  
    <div id="related-posts">
      <h3>مطالب مرتبط</h3>
      <ul>
        
          <li><a href="/free-https-for-all.html">گواهینامه SSL/TLS مجّانی برای همه</a></li>
        
          <li><a href="/installing-ssl-certificate.html">طریقه نصب گواهینامه SSL روی سرور شخصی</a></li>
        
          <li><a href="/keybase.html">گاوصندوقی در دل اینترنت</a></li>
        
          <li><a href="/plug-up-yubikey-4-hardware-keys.html">کارت هوشمند</a></li>
        
          <li><a href="/installing-gnome-shell-on-archlinux.html">نصب نوم ۳ روی آرچ‌لینوکس</a></li>
        
        </ul>
    </div>
  

  <small id="post-tags">
    
      <i class="fas fa-tag"></i>
      <a rel="tag" href="/tag/%D8%A7%D9%85%D9%86%DB%8C%D8%AA.html">امنیت</a>
    
      <i class="fas fa-tag"></i>
      <a rel="tag" href="/tag/https.html">https</a>
    
      <i class="fas fa-tag"></i>
      <a rel="tag" href="/tag/cdn.html">cdn</a>
    
      <i class="fas fa-tag"></i>
      <a rel="tag" href="/tag/ssl.html">ssl</a>
    

    <i class="fas fa-code"></i>
    
    
    <a href="https://raw.githubusercontent.com/mehdisadeghi/mehdix.ir/master/_source/_posts/2017-12-16-netlify.md">سورس</a>
    
  </small>

  <nav class="pagination">
    
      <a href="https://mehdix.ir/net-neutrality.html" class="pagination--pager" title="در مورد لغو قانون بی‌طرفی اینترنت">قبلی</a>
    

    
      <a href="https://mehdix.ir/keybase.html" class="pagination--pager" title="گاوصندوقی در دل اینترنت">بعدی </a>
    
  </nav>

  <section>
    
      
<section id="static-comments">
  
  
  
  <h4 id="comments-header">دیدگاه‌ها</h4>
  <div id="comments">
    
    <div class="comment-chain">
      <article id="5a4cb6ae8df9df36f12c16c5">
        <div class="comment-image-wrapper">
          <img class="comment-avatar" src="https://www.gravatar.com/avatar/27b6f3ebc1535b4b11b1508ec7c7364c?s=200&d=robohash" />
        </div>
        <div class="comment-body-wrapper">
          <span class="comment-meta">
            <small>
              
                <span commenter>روح اله</span>
              
            </small>
            <small> &nbsp; <a href="#5a4cb6ae8df9df36f12c16c5">۱۳ دی ۱۳۹۶</a></small>
            <small> &nbsp; <a href="#comment-form" onclick="replyTo('5a4cb6ae8df9df36f12c16c5')">پاسخ</a></small>
            <span style="display:none" commentId>5a4cb6ae8df9df36f12c16c5</span>
          </span>
          <p>من یه دامنه و هاست دارم که به هم متصل بودن، تصورم این بود که میشه مثل CloudFlare این Netlify رو بین این دو قرار بدم، وارد Netlify شدم و دامنم رو به DNS Zone اضافه کردم، چهار تا NameServer داد که دامنم روی اونا تنظیم کردم، بعد تو Netlify اومدم توی قسمت DNS Records دو تا NameServer هاستم رو در قالب  NS وارد کردم، الان بعد یه روز دامنم به هاست متصل نمیشه. نمیدونم ایراد کارم کجاست؟</p>

        </div>
      </article>

        

    </div>
    
    <div class="comment-chain">
      <article id="5a4cf9438df9df223b2c16c9">
        <div class="comment-image-wrapper">
          <img class="comment-avatar" src="https://www.gravatar.com/avatar/0371f5b900b484368f9e1717d7d965b1?s=200&d=robohash" />
        </div>
        <div class="comment-body-wrapper">
          <span class="comment-meta">
            <small>
              
                <a href=https://mehdix.ir target="_"><span commenter>مهدی صادقی</span></a>
              
            </small>
            <small> &nbsp; <a href="#5a4cf9438df9df223b2c16c9">۱۳ دی ۱۳۹۶</a></small>
            <small> &nbsp; <a href="#comment-form" onclick="replyTo('5a4cf9438df9df223b2c16c9')">پاسخ</a></small>
            <span style="display:none" commentId>5a4cf9438df9df223b2c16c9</span>
          </span>
          <blockquote>
  <p>تصورم این بود که میشه مثل CloudFlare این Netlify رو بین این دو قرار بدم</p>
</blockquote>

<p>نتلیفای سایت دیگه‌ای رو نمی‌تونه سرو کنه. همه چیز باید رو خودش باشه. مناسب سایتهای استاتیکه.</p>

<blockquote>
  <p>بعد تو Netlify اومدم توی قسمت DNS Records دو تا NameServer هاستم رو در قالب NS وارد کردم</p>
</blockquote>

<p>این قسمت فقط به درد تعریف رکوردهای جدید می‌خوره. مثلا تعریف زیر دامنه برای ایمیل. نمی‌تونی هاستت خودت رو اینجا وارد کنی.</p>

<p>کلا نمی‌تونی از نتلیفای برای اضافه کردن https به سرور یا هاست شخصی خودت استفاده کنی مگر اینکه استاتیک باشه و کاملا از روی نتلیفای سرو بشه. مطلب رو اصلاح می‌کنم که باعث سردرگمی نشه.</p>

        </div>
      </article>

        

    </div>
    
  </div>
  

  <form id="comment-form" name="comment" netlify-honeypot="bot-field" netlify>
    <input name="bot-field" style="display:none">
    <input name="page_id" style="display:none" value="/netlify">
    <input id="reply-to" name="reply-to" style="display:none">
    <label for="message">دیدگاه<sup class="required">*</sup> &nbsp;<small>می‌توانید با <a href="http://commonmark.org/help/" target="_">مارک‌داون</a> هم بنویسید.</small><br><small id="replyToVisualClue"></small>
      <textarea id="message" name="message" required alt="no!!" onkeyup="preview()"></textarea>
      <div id="preview"></div>
    </label>
    <label for="name">نام<sup class="required">*</sup>
      <input id="name" type="text" name="name" required>
    </label>
    <label for="email">ایمیل<sup class="required">*</sup>
      <input id="email" type="email" name="email" required>
    </label>
    <label for="website">وبسایت
      <input id="website" type="url" name="website">
    </label>
    <div style="text-align:left">
      <button type="submit" class="button">ارسال</button>
    </div>
  </form>

</section>
<script src="https://mehdix.ir/assets/js/showdown.min.js" type="text/javascript">
</script>
<script type="text/javascript">
  function preview() {
    var converter = new showdown.Converter();
    var markdown = document.getElementById("message").value;
    document.getElementById("preview").innerHTML = converter.makeHtml(markdown);
  }

  function replyTo(commentID) {
    var comment = document.getElementById(commentID);
    document.getElementById("reply-to").value = comment.querySelector("span[commentId]").innerText;
    document.getElementById("replyToVisualClue").innerText = "[در جواب " + comment.querySelector("span[commenter]").innerText + "]";
  }
</script>
    
  </section>

</article>
</div>
    </main><footer>

  <div class="wrapper">

    

    <p id="footer-description">بچه که بودیم همیشه برای بازی خونه می‌ساختیم. حالا هم نمونه‌اش رو در وب ساختم. اینجا سکوی انتشار مطالبی در مورد دانش تولید نرم‌افزار و ایده‌ها و علایق شخصی‌ام است، بویژه راه‌حل‌های مهندسی که باعث رشد و پیشرفتم شده است و می‌تواند مورد استفاده دیگران هم قرار بگیرد.
</p>

    <ul class="social-media-list">
      
      <li>
        <i class="fab fa-github"></i>
        <a href="https://github.com/mehdisadeghi">
          <span class="username social-media-text">پروژه‌ها</span>
        </a>
      </li>
      
      
      <li>
        <i class="fab fa-twitter-square"></i>
        <a href="https://twitter.com/msadeghii">
          <span class="username social-media-text">توئیت‌ها</span>
        </a>
      </li>
      
      
      <li>
        <i class="fas fa-rss"></i>
        <a href="https://feedburner.google.com/fb/a/mailverify?uri=mehdixir&amp;loc=en_US">
          <span class="username social-media-text">خبرنامه</span></a>
      </li>
      <li>
        <i class="fas fa-rss"></i>
        <a href="http://feeds.feedburner.com/mehdixir">
        <span class="username social-media-text">خوراک</span></a>
      </li>
      
      
        <li>
          <i class="fas fa-envelope-open"></i>
          <a href="mailto:sadeghi@mehdix.org">
            <span class="username social-media-text">تماس</span></a></li>
      
    </ul>

  <div id="footer-extra">
    <small id="license">
  <i class="fab fa-creative-commons"></i>
  مطالب این وبلاگ تحت مجوز
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/deed.fa">
    کریتیو کامنز اتریبیوشن ۴.۰ اینترنشنال
  </a>قرار دارد.
</small>
    <a id="atom" href="https://validator.w3.org/feed/check.cgi?url=https://mehdix.ir/feed.xml"><img src=https://mehdix.ir/assets/img/valid-atom.png alt="[Valid Atom 1.0]" title="Validate my Atom 1.0 feed" /></a>
  </div>

  </div>

  <small id="build-time">Site generated on Tue, 06 Feb 2018 02:43:37 +0100</small>

</footer><script src="https://mehdix.ir/assets/js/main.js"></script>
     <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57282325-1', 'auto');
  ga('send', 'pageview');

</script>
 
  </body>
</html>